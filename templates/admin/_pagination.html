{# Reusable pagination include for Admin lists #}
{% if total_pages and total_pages > 1 %}
<nav aria-label="Pagination" class="mt-3">
  <ul class="pagination justify-content-center">
    <li class="page-item {% if page <= 1 %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for(endpoint, lang=lang, page=1, per_page=per_page, **(args or {})) }}" aria-label="First">&laquo;</a>
    </li>
    <li class="page-item {% if page <= 1 %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for(endpoint, lang=lang, page=page-1, per_page=per_page, **(args or {})) }}">{{ _('Prev') }}</a>
    </li>

    {# Numeric pages with ellipsis #}
    {% for p in range(1, total_pages + 1) %}
      {% if p == 1 or p == total_pages or (p >= page - 2 and p <= page + 2) %}
        <li class="page-item {% if p == page %}active{% endif %}">
          <a class="page-link" href="{{ url_for(endpoint, lang=lang, page=p, per_page=per_page, **(args or {})) }}">{{ p }}</a>
        </li>
      {% elif p == page - 3 or p == page + 3 %}
        <li class="page-item disabled"><span class="page-link">â€¦</span></li>
      {% endif %}
    {% endfor %}

    <li class="page-item {% if page >= total_pages %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for(endpoint, lang=lang, page=page+1, per_page=per_page, **(args or {})) }}">{{ _('Next') }}</a>
    </li>
    <li class="page-item {% if page >= total_pages %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for(endpoint, lang=lang, page=total_pages, per_page=per_page, **(args or {})) }}" aria-label="Last">&raquo;</a>
    </li>
  </ul>
  <div class="text-center text-muted small">
    {{ _('Total') }}: {{ total }} | {{ _('Page') }} {{ page }}/{{ total_pages }}
  </div>
  
  {# Optional: page size selector (simple) #}
  <div class="text-center mt-2">
    <form method="get" style="display:inline-block;">
      {% for k, v in (args or {}).items() %}
        {% if v %}
          <input type="hidden" name="{{ k }}" value="{{ v }}">
        {% endif %}
      {% endfor %}
      <input type="hidden" name="page" value="1">
      <label class="me-1">{{ _('Per page') }}:</label>
      <select name="per_page" class="form-select form-select-sm d-inline-block" style="width:auto;" onchange="this.form.submit()">
        {% for size in [10,20,50,100] %}
          <option value="{{ size }}" {% if per_page == size %}selected{% endif %}>{{ size }}</option>
        {% endfor %}
      </select>
    </form>
  </div>
</nav>
{% endif %}

